{% extends 'base.html' %}

{% block titulo %}Bienvenidos->Login{% endblock %}

{% block contenido %}
{% include 'menu1.html' %}
<h1>Usuario: {{ datos.nombres }} {{ datos.apellido_p }}</h1>

<div class="container mt-5">
    <div class="col-lg-8 col-md-12 col-sm-12 mx-auto">
        <h2 class="title">Creación de Password</h2>
        <div id="videoContainer">
            <video id="videoElement" width="640" height="480" controls>
                <source src="tu_video.mp4" type="video/mp4">
                <!-- Aquí define los formatos de video que quieras soportar -->
            </video>
        </div>

        <form id="capture-form" action="/procesar_registro" method="post">
            <input type="hidden" id="foto_apellido_m" name="foto_apellido_m" value="{{ datos.apellido_m }}">

            <div class="mb-3">
                <label for="nombres" class="form-label">NOMBRES</label>
                <input type="text" required class="form-control" id="nombres" name="nombres"
                    value="{{ datos.nombres }}">
            </div>

            <div class="mb-3">
                <label for="apellido_p" class="form-label">APELLIDO PATERNO</label>
                <input type="text" required class="form-control" id="apellido_p" name="apellido_p"
                    value="{{ datos.apellido_p }}">
            </div>

            <div class="mb-3">
                <label for="apellido_m" class="form-label">APELLIDO MATERNO</label>
                <input type="text" required class="form-control" id="apellido_m" name="apellido_m"
                    value="{{ datos.apellido_m }}">
            </div>

            <div class="mb-3">
                <label for="es_alumno" class="form-label">TIPO USUARIO</label>
                <input type="text" required class="form-control" id="es_alumno" name="es_alumno"
                    value="{{ datos.es_alumno }}" readonly>
            </div>

            <div class="mb-3">
                <label for="curso" class="form-label">CURSO</label>
                <input type="text" required class="form-control" id="curso" name="curso" value="{{ datos.curso }}">
            </div>

            <div class="mb-3">
                <label for="email" class="form-label">EMAIL</label>
                <input type="text" required class="form-control" id="email" name="email" value="{{ datos.email }}"
                    readonly>
            </div>

            <div class="mb-3">
                <label for="password" class="form-label">PASSWORD</label>
                <input type="password" class="form-control" id="password" name="password">

                <div id="emailHelp" class="form-text">No compartas la clave con nadie.</div>
            </div>

            <div class="mb-3">
                <label for="confirm_password" class="form-label">CONFIRMA PASSWORD</label>
                <input type="password" class="form-control" id="confirm_password" name="confirm_password">
            </div>
            <!-- Resto de los campo  del formulario aquí -->

            <button type="submit" class="btn btn-success btn-block">REGISTRATE</button>
        </form>
    </div>
</div>

<script>
    const videoContainer = document.getElementById('videoContainer');
    const captureButton = document.createElement('button');
    captureButton.innerText = 'Capturar';

    // Al hacer clic con el botón derecho del ratón
    videoContainer.addEventListener('contextmenu', (e) => {
        e.preventDefault(); // Previene el menú contextual del navegador
        const mouseX = e.clientX;
        const mouseY = e.clientY;

        // Posiciona el botón de captura en la posición del clic derecho
        captureButton.style.position = 'absolute';
        captureButton.style.top = `${mouseY}px`;
        captureButton.style.left = `${mouseX}px`;

        // Muestra el botón de captura
        captureButton.style.display = 'block';
    });

    // Al hacer clic en el botón de captura
    captureButton.addEventListener('click', () => {
        // Aquí puedes agregar la lógica para capturar el fotograma del video
        // y guardar la imagen o realizar alguna otra acción.
        alert('¡Captura realizada!');

        // Oculta el botón de captura después de la captura
        captureButton.style.display = 'none';
    });

    // Agrega el botón de captura al contenedor del video
    videoContainer.appendChild(captureButton);
</script>
